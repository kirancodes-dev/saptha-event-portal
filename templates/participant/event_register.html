<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register for {{ event.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; }
        .form-container {
            max-width: 800px; margin: 40px auto; background: white;
            padding: 40px; border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border-top: 5px solid #002147; /* University Blue */
        }
        .section-title {
            color: #002147; font-weight: 700; border-bottom: 2px solid #f1f1f1;
            padding-bottom: 10px; margin-bottom: 20px; margin-top: 30px;
        }
        .bg-light-custom { background-color: #f8f9fa; padding: 15px; border-radius: 8px; border: 1px solid #eee; }
    </style>
</head>
<body>

<div class="container">
    <div class="form-container">
        
        <div class="text-center mb-5">
            <h2 class="fw-bold text-primary">{{ event.title }}</h2>
            <p class="text-muted">
                <span class="badge bg-warning text-dark me-2">{{ 'Team Event' if event.is_team_event else 'Individual Event' }}</span>
                Fill in the details to secure your spot.
            </p>
        </div>

        <form action="/participant/register_event/{{ event_id }}" method="POST">
            
            <h5 class="section-title">1. Participation Details</h5>
            
            {% if event.is_team_event %}
            <div class="mb-4">
                <label class="form-label fw-bold">Team Name <span class="text-danger">*</span></label>
                <input type="text" name="team_name" class="form-control" placeholder="e.g. Code Warriors" required>
            </div>
            {% endif %}

            <div class="mb-4">
                <label class="form-label fw-bold">Choose Problem Statement <span class="text-danger">*</span></label>
                {% if event.problem_statements and event.problem_statements|length > 0 %}
                    <select name="problem_statement" class="form-select" required>
                        <option value="" selected disabled>-- Select a Topic --</option>
                        {% for problem in event.problem_statements %}
                            <option value="{{ problem }}">{{ problem }}</option>
                        {% endfor %}
                    </select>
                {% else %}
                    <input type="text" name="problem_statement" class="form-control" placeholder="Enter your project title / idea" required>
                {% endif %}
            </div>

            <h5 class="section-title">2. {{ 'Team Lead' if event.is_team_event else 'Participant' }} Details</h5>
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label small text-muted">Full Name</label>
                    <input type="text" class="form-control" value="{{ user.name }}" readonly style="background-color: #e9ecef;">
                </div>
                <div class="col-md-6">
                    <label class="form-label small text-muted">Email ID</label>
                    <input type="email" class="form-control" value="{{ user.user_id }}" readonly style="background-color: #e9ecef;">
                </div>
                <div class="col-md-6">
                    <label class="form-label small text-muted">USN / ID <span class="text-danger">*</span></label>
                    <input type="text" name="lead_usn" class="form-control" placeholder="e.g. 1SG23CS001" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label small text-muted">Contact Number <span class="text-danger">*</span></label>
                    <input type="tel" name="lead_phone" class="form-control" placeholder="10-digit Mobile" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label small text-muted">Gender <span class="text-danger">*</span></label>
                    <select name="gender" class="form-select" required>
                        <option value="" selected disabled>Select</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>

            {% if event.is_team_event %}
            <h5 class="section-title">3. Team Members</h5>
            <p class="small text-muted mb-3">Add details for your team mates (Leave blank if fewer members).</p>
            
            <div class="bg-light-custom mb-3">
                <h6 class="fw-bold mb-3">Member 2</h6>
                <div class="row g-2">
                    <div class="col-md-6"><input type="text" name="member_1_name" class="form-control form-control-sm" placeholder="Full Name"></div>
                    <div class="col-md-6"><input type="text" name="member_1_usn" class="form-control form-control-sm" placeholder="USN"></div>
                </div>
            </div>

            <div class="bg-light-custom mb-3">
                <h6 class="fw-bold mb-3">Member 3</h6>
                <div class="row g-2">
                    <div class="col-md-6"><input type="text" name="member_2_name" class="form-control form-control-sm" placeholder="Full Name"></div>
                    <div class="col-md-6"><input type="text" name="member_2_usn" class="form-control form-control-sm" placeholder="USN"></div>
                </div>
            </div>
            {% endif %}

            <div class="d-grid mt-5">
                <button type="submit" class="btn btn-warning btn-lg fw-bold text-dark">Confirm Registration</button>
            </div>

        </form>
    </div>
</div>

</body>
</html>